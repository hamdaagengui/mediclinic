<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Prescription" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<subDataset name="dataset1"/>
	<queryString>
		<![CDATA[select dd.registration_id,ad.address1,ad.address2,ad.locality,ad.city,ad.state,ad.country,
IFNULL(dg.prescription,'None')as Prescription, IFNULL(tst.suggested_test,'None')as Test,concat('Dr. ',ps_doc.first_name,' ',ps_doc.last_name) as doctor,
concat(ps_pat.first_name,' ',ps_pat.last_name) as Patient
from
mediapp.appointment_history ah
join mediapp.patient_details pd
on  pd.idPatient_details = ah.idPatient_details
join mediapp.person ps_pat
on ps_pat.idperson = pd.idperson
join mediapp.doctor_details dd
on dd.iddoctor_details = ah.iddoctor_details
join mediapp.person ps_doc
on dd.idperson = ps_doc.idperson
left outer join mediapp.diagnosis dg
on dg.idappointment = ah.idappointment_history
left outer join mediapp.address ad
on ad.personID = ps_doc.idperson
left outer join mediapp.tests tst
on dg.iddiagnosis = tst.fdiagnosis
where idappointment_history = 1;]]>
	</queryString>
	<field name="registration_id" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="address1" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="address2" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="locality" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="city" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="state" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="country" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="Prescription" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="Test" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="doctor" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="Patient" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="127" splitType="Stretch">
			<textField>
				<reportElement x="455" y="0" width="100" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{doctor}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="455" y="20" width="100" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{address1}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="455" y="40" width="100" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{address2}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="455" y="62" width="100" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{locality}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="455" y="82" width="100" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{city}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="455" y="102" width="100" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{state}]]></textFieldExpression>
			</textField>
			<line>
				<reportElement x="0" y="122" width="555" height="1"/>
			</line>
		</band>
	</title>
	<pageHeader>
		<band height="172" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="0" width="78" height="20"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Patient Name]]></text>
			</staticText>
			<textField>
				<reportElement x="78" y="0" width="100" height="20"/>
				<textElement>
					<font fontName="Verdana" isItalic="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{Patient}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="78" y="57" width="100" height="20"/>
				<textElement>
					<font fontName="Verdana" isItalic="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{Prescription}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="0" y="91" width="78" height="20"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Test Suggested]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="37" width="78" height="20"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Prescription]]></text>
			</staticText>
			<textField>
				<reportElement x="78" y="111" width="100" height="20"/>
				<textElement>
					<font fontName="Verdana" isItalic="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{Test}]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<pageFooter>
		<band height="54" splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band height="42" splitType="Stretch"/>
	</summary>
</jasperReport>
